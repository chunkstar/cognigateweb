<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cognigate Dashboard - Real-time AI Budget Monitoring</title>
    <meta name="description" content="Monitor your AI spending, track budgets, and view provider usage in real-time">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Modern color palette matching landing page */
            --primary: #06b6d4;
            --primary-light: #22d3ee;
            --primary-dark: #0891b2;
            --secondary: #10b981;
            --accent: #8b5cf6;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #0a0a0a;
            --dark-2: #1a1a1a;
            --dark-3: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Animated gradient background */
        .gradient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .gradient-bg::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 20% 50%, rgba(6, 182, 212, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 40% 20%, rgba(16, 185, 129, 0.1) 0%, transparent 50%);
            animation: gradientMove 20s ease infinite;
            z-index: 0;
        }

        @keyframes gradientMove {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-10%, -10%); }
        }

        /* Header */
        header {
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.5rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        /* Dashboard Container */
        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .dashboard-header {
            margin-bottom: 2rem;
        }

        .dashboard-header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .dashboard-header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: rgba(26, 26, 26, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            padding: 1.5rem;
            transition: transform 0.3s, border-color 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
        }

        .stat-card .label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .stat-card .value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .stat-card .change {
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .stat-card .change.positive {
            color: var(--secondary);
        }

        .stat-card .change.negative {
            color: var(--danger);
        }

        /* Charts Grid */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .chart-card {
            background: rgba(26, 26, 26, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            padding: 2rem;
        }

        .chart-card h3 {
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
        }

        /* Budget Progress */
        .budget-section {
            background: rgba(26, 26, 26, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .budget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .budget-amount {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .budget-limit {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .progress-bar-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 1rem;
            height: 2rem;
            overflow: hidden;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 1rem;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 0 1rem;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .progress-bar.warning {
            background: linear-gradient(90deg, var(--warning), #f97316);
        }

        .progress-bar.danger {
            background: linear-gradient(90deg, var(--danger), #dc2626);
        }

        /* Alerts */
        .alerts-section {
            background: rgba(26, 26, 26, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .alert-item {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid var(--primary);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .alert-item.warning {
            border-left-color: var(--warning);
        }

        .alert-item.danger {
            border-left-color: var(--danger);
        }

        .alert-item .alert-time {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 0.25rem;
        }

        .alert-item .alert-message {
            font-size: 0.95rem;
        }

        /* Request History */
        .history-section {
            background: rgba(26, 26, 26, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            padding: 2rem;
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
        }

        .history-table th {
            text-align: left;
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            font-weight: 600;
        }

        .history-table td {
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .history-table tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .provider-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .provider-badge.openai {
            background: rgba(16, 163, 127, 0.2);
            color: #10a37f;
        }

        .provider-badge.anthropic {
            background: rgba(204, 153, 102, 0.2);
            color: #cc9966;
        }

        .provider-badge.google {
            background: rgba(66, 133, 244, 0.2);
            color: #4285f4;
        }

        .provider-badge.ollama {
            background: rgba(6, 182, 212, 0.2);
            color: var(--primary);
        }

        .cost-cell {
            font-weight: 600;
            color: var(--secondary);
        }

        @media (max-width: 768px) {
            .dashboard {
                padding: 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            .history-table {
                font-size: 0.85rem;
            }

            .history-table th,
            .history-table td {
                padding: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="gradient-bg"></div>

    <header>
        <div class="header-content">
            <div class="logo">Cognigate Dashboard</div>
            <nav>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="https://github.com/chunkstar/cognigateweb" target="_blank">GitHub</a></li>
                    <li><a href="https://www.npmjs.com/package/cognigate" target="_blank">npm</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="dashboard">
        <div class="dashboard-header">
            <h1>Real-time Monitoring</h1>
            <p>Track your AI spending, budgets, and provider usage</p>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="label">Today's Spending</div>
                <div class="value" id="todaySpending">$0.00</div>
                <div class="change positive">
                    <span>↓</span>
                    <span id="spendingChange">12% vs yesterday</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="label">Total Requests</div>
                <div class="value" id="totalRequests">0</div>
                <div class="change positive">
                    <span>↑</span>
                    <span id="requestsChange">24% increase</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="label">Avg Cost/Request</div>
                <div class="value" id="avgCost">$0.00</div>
                <div class="change negative">
                    <span>↓</span>
                    <span id="costChange">8% lower</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="label">Cache Hit Rate</div>
                <div class="value" id="cacheHitRate">0%</div>
                <div class="change positive">
                    <span>↑</span>
                    <span id="cacheChange">15% improvement</span>
                </div>
            </div>
        </div>

        <!-- Budget Progress -->
        <div class="budget-section">
            <div class="budget-header">
                <div>
                    <h3>Daily Budget</h3>
                    <div class="budget-limit">Limit: <span id="budgetLimit">$10.00</span></div>
                </div>
                <div class="budget-amount">
                    <span id="budgetUsed">$0.00</span> / <span id="budgetTotal">$10.00</span>
                </div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="budgetProgress" style="width: 0%">
                    <span id="budgetPercent">0%</span>
                </div>
            </div>
        </div>

        <!-- Charts -->
        <div class="charts-grid">
            <div class="chart-card">
                <h3>Provider Usage</h3>
                <canvas id="providerChart"></canvas>
            </div>
            <div class="chart-card">
                <h3>Cost Over Time</h3>
                <canvas id="costChart"></canvas>
            </div>
        </div>

        <!-- Alerts -->
        <div class="alerts-section">
            <h3 style="margin-bottom: 1.5rem;">Recent Alerts</h3>
            <div id="alertsContainer">
                <!-- Alerts will be dynamically added -->
            </div>
        </div>

        <!-- Request History -->
        <div class="history-section">
            <h3 style="margin-bottom: 1.5rem;">Request History</h3>
            <table class="history-table">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Provider</th>
                        <th>Model</th>
                        <th>Tokens</th>
                        <th>Cost</th>
                    </tr>
                </thead>
                <tbody id="historyTableBody">
                    <!-- Rows will be dynamically added -->
                </tbody>
            </table>
        </div>
    </main>

    <script>
        // Simulated real-time data
        let todaySpending = 0;
        let totalRequests = 0;
        let budgetLimit = 10.00;
        let requestHistory = [];
        let providerStats = {
            openai: 0,
            anthropic: 0,
            google: 0,
            ollama: 0
        };
        let costHistory = [];

        // Initialize charts
        const providerChart = new Chart(document.getElementById('providerChart'), {
            type: 'doughnut',
            data: {
                labels: ['OpenAI', 'Anthropic', 'Google', 'Ollama'],
                datasets: [{
                    data: [0, 0, 0, 0],
                    backgroundColor: [
                        'rgba(16, 163, 127, 0.8)',
                        'rgba(204, 153, 102, 0.8)',
                        'rgba(66, 133, 244, 0.8)',
                        'rgba(6, 182, 212, 0.8)'
                    ],
                    borderColor: [
                        'rgba(16, 163, 127, 1)',
                        'rgba(204, 153, 102, 1)',
                        'rgba(66, 133, 244, 1)',
                        'rgba(6, 182, 212, 1)'
                    ],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: '#a1a1aa',
                            padding: 15,
                            font: {
                                size: 12
                            }
                        }
                    }
                }
            }
        });

        const costChart = new Chart(document.getElementById('costChart'), {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'Cost ($)',
                    data: [],
                    borderColor: 'rgba(6, 182, 212, 1)',
                    backgroundColor: 'rgba(6, 182, 212, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: {
                    x: {
                        ticks: {
                            color: '#a1a1aa'
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.05)'
                        }
                    },
                    y: {
                        ticks: {
                            color: '#a1a1aa',
                            callback: function(value) {
                                return '$' + value.toFixed(2);
                            }
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.05)'
                        }
                    }
                },
                plugins: {
                    legend: {
                        labels: {
                            color: '#a1a1aa'
                        }
                    }
                }
            }
        });

        // Simulate request
        function simulateRequest() {
            const providers = ['openai', 'anthropic', 'google', 'ollama'];
            const models = {
                openai: ['gpt-4', 'gpt-3.5-turbo'],
                anthropic: ['claude-3-opus', 'claude-3-sonnet'],
                google: ['gemini-pro', 'gemini-1.5-pro'],
                ollama: ['llama2', 'mistral']
            };

            const provider = providers[Math.floor(Math.random() * providers.length)];
            const model = models[provider][Math.floor(Math.random() * models[provider].length)];
            const tokens = Math.floor(Math.random() * 2000) + 500;
            const cost = provider === 'ollama' ? 0 : (Math.random() * 0.5 + 0.1);

            // Update stats
            todaySpending += cost;
            totalRequests++;
            providerStats[provider]++;

            // Add to history
            const time = new Date().toLocaleTimeString();
            requestHistory.unshift({
                time,
                provider,
                model,
                tokens,
                cost
            });

            // Keep only last 20 requests
            if (requestHistory.length > 20) {
                requestHistory.pop();
            }

            // Add to cost history
            costHistory.push({
                time,
                cost: todaySpending
            });

            // Keep only last 10 data points
            if (costHistory.length > 10) {
                costHistory.shift();
            }

            // Check for alerts
            checkAlerts();

            // Update UI
            updateUI();
        }

        function checkAlerts() {
            const alertsContainer = document.getElementById('alertsContainer');
            const budgetPercent = (todaySpending / budgetLimit) * 100;

            if (budgetPercent >= 90 && budgetPercent < 100) {
                addAlert('warning', 'Budget Warning', `You've used ${budgetPercent.toFixed(1)}% of your daily budget`);
            } else if (budgetPercent >= 100) {
                addAlert('danger', 'Budget Exceeded', 'Daily budget limit reached! Falling back to local models.');
            }
        }

        function addAlert(type, title, message) {
            const alertsContainer = document.getElementById('alertsContainer');
            const time = new Date().toLocaleTimeString();

            // Check if alert already exists
            if (alertsContainer.querySelector(`[data-title="${title}"]`)) {
                return;
            }

            const alertHTML = `
                <div class="alert-item ${type}" data-title="${title}">
                    <div class="alert-time">${time}</div>
                    <div class="alert-message"><strong>${title}:</strong> ${message}</div>
                </div>
            `;

            alertsContainer.insertAdjacentHTML('afterbegin', alertHTML);
        }

        function updateUI() {
            // Update stats
            document.getElementById('todaySpending').textContent = '$' + todaySpending.toFixed(2);
            document.getElementById('totalRequests').textContent = totalRequests;
            document.getElementById('avgCost').textContent = '$' + (todaySpending / totalRequests || 0).toFixed(3);

            // Update budget progress
            const budgetPercent = Math.min((todaySpending / budgetLimit) * 100, 100);
            const progressBar = document.getElementById('budgetProgress');
            progressBar.style.width = budgetPercent + '%';
            document.getElementById('budgetPercent').textContent = budgetPercent.toFixed(1) + '%';
            document.getElementById('budgetUsed').textContent = '$' + todaySpending.toFixed(2);

            // Update progress bar color
            progressBar.classList.remove('warning', 'danger');
            if (budgetPercent >= 90) {
                progressBar.classList.add('danger');
            } else if (budgetPercent >= 75) {
                progressBar.classList.add('warning');
            }

            // Update provider chart
            providerChart.data.datasets[0].data = [
                providerStats.openai,
                providerStats.anthropic,
                providerStats.google,
                providerStats.ollama
            ];
            providerChart.update();

            // Update cost chart
            costChart.data.labels = costHistory.map(h => h.time);
            costChart.data.datasets[0].data = costHistory.map(h => h.cost);
            costChart.update();

            // Update history table
            const tbody = document.getElementById('historyTableBody');
            tbody.innerHTML = requestHistory.map(req => `
                <tr>
                    <td>${req.time}</td>
                    <td><span class="provider-badge ${req.provider}">${req.provider}</span></td>
                    <td>${req.model}</td>
                    <td>${req.tokens.toLocaleString()}</td>
                    <td class="cost-cell">$${req.cost.toFixed(3)}</td>
                </tr>
            `).join('');

            // Calculate cache hit rate (simulated)
            const cacheHitRate = Math.floor(Math.random() * 30) + 40;
            document.getElementById('cacheHitRate').textContent = cacheHitRate + '%';
        }

        // Simulate requests every 2-5 seconds
        function startSimulation() {
            simulateRequest();
            const nextInterval = Math.random() * 3000 + 2000;
            setTimeout(startSimulation, nextInterval);
        }

        // Start simulation
        startSimulation();

        // Initial UI update
        updateUI();
    </script>
</body>
</html>
